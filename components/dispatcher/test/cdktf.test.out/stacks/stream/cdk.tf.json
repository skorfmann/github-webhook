{
  "//": {
    "metadata": {
      "version": "0.4.1",
      "stackName": "stream"
    }
  },
  "terraform": {
    "required_providers": {
      "aws": {
        "version": "~> 3.0",
        "source": "aws"
      }
    }
  },
  "provider": {
    "aws": [
      {
        "region": "eu-central-1"
      }
    ]
  },
  "resource": {
    "aws_cloudwatch_event_bus": {
      "stream_eventbridge_AEC18F7F": {
        "name": "supportmeister-test",
        "//": {
          "metadata": {
            "path": "stream/eventbridge",
            "uniqueId": "stream_eventbridge_AEC18F7F",
            "stackTrace": [
              "new TerraformElement (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-element.js:21:28)",
              "new TerraformResource (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-resource.js:17:9)",
              "new CloudwatchEventBus (/Users/sebastian/projects/cdk/live/stream/node_modules/@cdktf/provider-aws/lib/cloudwatch-event-bus.js:24:9)",
              "new MyStack (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:12:29)",
              "Object.<anonymous> (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:32:1)",
              "Module._compile (node:internal/modules/cjs/loader:1108:14)",
              "Object.Module._extensions..js (node:internal/modules/cjs/loader:1137:10)",
              "Module.load (node:internal/modules/cjs/loader:973:32)",
              "Function.Module._load (node:internal/modules/cjs/loader:813:14)",
              "Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:76:12)",
              "node:internal/main/run_main_module:17:47"
            ]
          }
        }
      }
    },
    "aws_dynamodb_table": {
      "stream_dispatchertest_table_72C89BA3": {
        "billing_mode": "PAY_PER_REQUEST",
        "hash_key": "id",
        "name": "dispatcher-test-on-duty-users",
        "stream_enabled": true,
        "stream_view_type": "NEW_AND_OLD_IMAGES",
        "attribute": [
          {
            "name": "id",
            "type": "S"
          }
        ],
        "//": {
          "metadata": {
            "path": "stream/dispatcher-test/table",
            "uniqueId": "stream_dispatchertest_table_72C89BA3",
            "stackTrace": [
              "new TerraformElement (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-element.js:21:28)",
              "new TerraformResource (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-resource.js:17:9)",
              "new DynamodbTable (/Users/sebastian/projects/cdk/live/stream/node_modules/@cdktf/provider-aws/lib/dynamodb-table.js:104:9)",
              "new Dispatcher (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/index.js:16:22)",
              "new MyStack (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:15:28)",
              "Object.<anonymous> (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:32:1)",
              "Module._compile (node:internal/modules/cjs/loader:1108:14)",
              "Object.Module._extensions..js (node:internal/modules/cjs/loader:1137:10)",
              "Module.load (node:internal/modules/cjs/loader:973:32)",
              "Function.Module._load (node:internal/modules/cjs/loader:813:14)",
              "Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:76:12)",
              "node:internal/main/run_main_module:17:47"
            ]
          }
        }
      }
    },
    "aws_iam_role": {
      "stream_dispatchertest_sfnworkflowrole_DBB9D365": {
        "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"states.amazonaws.com\"]}}]}",
        "name": "dispatcher-test-sfn-workflow-role",
        "inline_policy": [
          {
            "name": "allow-sfn-to-ddb",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"dynamodb:GetItem\",\"Resource\":\"${aws_dynamodb_table.stream_dispatchertest_table_72C89BA3.arn}\",\"Effect\":\"Allow\"}]}"
          }
        ],
        "//": {
          "metadata": {
            "path": "stream/dispatcher-test/sfn-workflow-role",
            "uniqueId": "stream_dispatchertest_sfnworkflowrole_DBB9D365",
            "stackTrace": [
              "new TerraformElement (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-element.js:21:28)",
              "new TerraformResource (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-resource.js:17:9)",
              "new IamRole (/Users/sebastian/projects/cdk/live/stream/node_modules/@cdktf/provider-aws/lib/iam-role.js:33:9)",
              "new Dispatcher (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/index.js:26:25)",
              "new MyStack (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:15:28)",
              "Object.<anonymous> (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:32:1)",
              "Module._compile (node:internal/modules/cjs/loader:1108:14)",
              "Object.Module._extensions..js (node:internal/modules/cjs/loader:1137:10)",
              "Module.load (node:internal/modules/cjs/loader:973:32)",
              "Function.Module._load (node:internal/modules/cjs/loader:813:14)",
              "Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:76:12)",
              "node:internal/main/run_main_module:17:47"
            ]
          }
        }
      },
      "stream_dispatchertest_dispatchertesteventbridgeworfklow_integrationrole_D7AFA968": {
        "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":[\"events.amazonaws.com\"]}}]}",
        "name": "dispatcher-test-event-bridge-worfklow-integration-role",
        "inline_policy": [
          {
            "name": "allow-invoke-stepfucntion",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":\"states:StartExecution\",\"Resource\":\"${aws_sfn_state_machine.stream_dispatchertest_statemachine_9D353680.arn}\",\"Effect\":\"Allow\"}]}"
          }
        ],
        "//": {
          "metadata": {
            "path": "stream/dispatcher-test/dispatcher-test-event-bridge-worfklow/integration-role",
            "uniqueId": "stream_dispatchertest_dispatchertesteventbridgeworfklow_integrationrole_D7AFA968",
            "stackTrace": [
              "new TerraformElement (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-element.js:21:28)",
              "new TerraformResource (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-resource.js:17:9)",
              "new IamRole (/Users/sebastian/projects/cdk/live/stream/node_modules/@cdktf/provider-aws/lib/iam-role.js:33:9)",
              "new EventBridgeTarget (/Users/sebastian/projects/cdk/live/stream/lib/workflow.js:29:26)",
              "new Dispatcher (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/index.js:70:9)",
              "new MyStack (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:15:28)",
              "Object.<anonymous> (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:32:1)",
              "Module._compile (node:internal/modules/cjs/loader:1108:14)",
              "Object.Module._extensions..js (node:internal/modules/cjs/loader:1137:10)",
              "Module.load (node:internal/modules/cjs/loader:973:32)",
              "Function.Module._load (node:internal/modules/cjs/loader:813:14)",
              "Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:76:12)",
              "node:internal/main/run_main_module:17:47"
            ]
          }
        }
      }
    },
    "aws_sfn_state_machine": {
      "stream_dispatchertest_statemachine_9D353680": {
        "definition": "{\"StartAt\":\"getDynamoDb\",\"States\":{\"getDynamoDb\":{\"Type\":\"Task\",\"Resource\":\"arn:aws:states:::dynamodb:getItem\",\"Parameters\":{\"TableName\":\"${aws_dynamodb_table.stream_dispatchertest_table_72C89BA3.name}\",\"Key\":{\"id\":{\"S\":\"USER#ONDUTY\"}}},\"ResultPath\":\"$.DynamoDB\",\"Next\":\"finishState\"},\"finishState\":{\"Type\":\"Succeed\"}}}",
        "name": "dispatcher-test-supportmeister",
        "role_arn": "${aws_iam_role.stream_dispatchertest_sfnworkflowrole_DBB9D365.arn}",
        "//": {
          "metadata": {
            "path": "stream/dispatcher-test/state-machine",
            "uniqueId": "stream_dispatchertest_statemachine_9D353680",
            "stackTrace": [
              "new TerraformElement (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-element.js:21:28)",
              "new TerraformResource (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-resource.js:17:9)",
              "new SfnStateMachine (/Users/sebastian/projects/cdk/live/stream/node_modules/@cdktf/provider-aws/lib/sfn-state-machine.js:42:9)",
              "new Dispatcher (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/index.js:65:25)",
              "new MyStack (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:15:28)",
              "Object.<anonymous> (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:32:1)",
              "Module._compile (node:internal/modules/cjs/loader:1108:14)",
              "Object.Module._extensions..js (node:internal/modules/cjs/loader:1137:10)",
              "Module.load (node:internal/modules/cjs/loader:973:32)",
              "Function.Module._load (node:internal/modules/cjs/loader:813:14)",
              "Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:76:12)",
              "node:internal/main/run_main_module:17:47"
            ]
          }
        }
      }
    },
    "aws_cloudwatch_event_rule": {
      "stream_dispatchertest_dispatchertesteventbridgeworfklow_rule_ED20C37C": {
        "event_bus_name": "${aws_cloudwatch_event_bus.stream_eventbridge_AEC18F7F.name}",
        "event_pattern": "{\"source\":[{\"prefix\":\"com.supportmeister.hooks\"}]}",
        "name": "dispatcher-test-event-bridge-worfklow-state-machine",
        "//": {
          "metadata": {
            "path": "stream/dispatcher-test/dispatcher-test-event-bridge-worfklow/rule",
            "uniqueId": "stream_dispatchertest_dispatchertesteventbridgeworfklow_rule_ED20C37C",
            "stackTrace": [
              "new TerraformElement (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-element.js:21:28)",
              "new TerraformResource (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-resource.js:17:9)",
              "new CloudwatchEventRule (/Users/sebastian/projects/cdk/live/stream/node_modules/@cdktf/provider-aws/lib/cloudwatch-event-rule.js:24:9)",
              "new EventBridgeTarget (/Users/sebastian/projects/cdk/live/stream/lib/workflow.js:15:22)",
              "new Dispatcher (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/index.js:70:9)",
              "new MyStack (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:15:28)",
              "Object.<anonymous> (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:32:1)",
              "Module._compile (node:internal/modules/cjs/loader:1108:14)",
              "Object.Module._extensions..js (node:internal/modules/cjs/loader:1137:10)",
              "Module.load (node:internal/modules/cjs/loader:973:32)",
              "Function.Module._load (node:internal/modules/cjs/loader:813:14)",
              "Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:76:12)",
              "node:internal/main/run_main_module:17:47"
            ]
          }
        }
      }
    },
    "aws_cloudwatch_event_target": {
      "stream_dispatchertest_dispatchertesteventbridgeworfklow_target_EBAF7468": {
        "arn": "${aws_sfn_state_machine.stream_dispatchertest_statemachine_9D353680.arn}",
        "event_bus_name": "${aws_cloudwatch_event_bus.stream_eventbridge_AEC18F7F.name}",
        "role_arn": "${aws_iam_role.stream_dispatchertest_dispatchertesteventbridgeworfklow_integrationrole_D7AFA968.arn}",
        "rule": "${aws_cloudwatch_event_rule.stream_dispatchertest_dispatchertesteventbridgeworfklow_rule_ED20C37C.name}",
        "target_id": "dispatcher-test-event-bridge-worfklow-state-machine",
        "//": {
          "metadata": {
            "path": "stream/dispatcher-test/dispatcher-test-event-bridge-worfklow/target",
            "uniqueId": "stream_dispatchertest_dispatchertesteventbridgeworfklow_target_EBAF7468",
            "stackTrace": [
              "new TerraformElement (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-element.js:21:28)",
              "new TerraformResource (/Users/sebastian/projects/cdk/live/stream/node_modules/cdktf/lib/terraform-resource.js:17:9)",
              "new CloudwatchEventTarget (/Users/sebastian/projects/cdk/live/stream/node_modules/@cdktf/provider-aws/lib/cloudwatch-event-target.js:119:9)",
              "new EventBridgeTarget (/Users/sebastian/projects/cdk/live/stream/lib/workflow.js:37:13)",
              "new Dispatcher (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/index.js:70:9)",
              "new MyStack (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:15:28)",
              "Object.<anonymous> (/Users/sebastian/projects/cdk/live/stream/components/dispatcher/test/stack.js:32:1)",
              "Module._compile (node:internal/modules/cjs/loader:1108:14)",
              "Object.Module._extensions..js (node:internal/modules/cjs/loader:1137:10)",
              "Module.load (node:internal/modules/cjs/loader:973:32)",
              "Function.Module._load (node:internal/modules/cjs/loader:813:14)",
              "Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:76:12)",
              "node:internal/main/run_main_module:17:47"
            ]
          }
        }
      }
    }
  },
  "output": {
    "table": {
      "value": "${aws_dynamodb_table.stream_dispatchertest_table_72C89BA3.arn}"
    },
    "workflow": {
      "value": "${aws_sfn_state_machine.stream_dispatchertest_statemachine_9D353680.arn}"
    }
  }
}